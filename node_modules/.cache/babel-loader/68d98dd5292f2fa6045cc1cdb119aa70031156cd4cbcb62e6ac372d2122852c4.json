{"ast":null,"code":"import React,{useState}from'react';import{Viewer}from'@react-pdf-viewer/core';import{defaultLayoutPlugin}from'@react-pdf-viewer/default-layout';import{Worker}from'@react-pdf-viewer/core';import{highlightPlugin}from'@react-pdf-viewer/highlight';import{SelectionMode}from'@react-pdf-viewer/selection-mode';import{toolbarPlugin}from'@react-pdf-viewer/toolbar';import{bookmarkPlugin}from'@react-pdf-viewer/bookmark';import PictureAsPdfIcon from'@mui/icons-material/PictureAsPdf';import BookmarkIcon from'@mui/icons-material/Bookmark';import HighlightIcon from'@mui/icons-material/Highlight';import NoteAddIcon from'@mui/icons-material/NoteAdd';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DocumentViewer=_ref=>{let{setLoading,onAnnotationUpdate}=_ref;const[pdfFile,setPdfFile]=useState(null);const[highlights,setHighlights]=useState([]);const[annotations,setAnnotations]=useState([]);const[selectedText,setSelectedText]=useState('');const defaultLayoutPluginInstance=defaultLayoutPlugin();const toolbarPluginInstance=toolbarPlugin();const bookmarkPluginInstance=bookmarkPlugin();const highlightPluginInstance=highlightPlugin({onHighlightClick:highlight=>{const annotation=annotations.find(a=>a.highlightId===highlight.id);if(annotation){// Show annotation in a popup\nalert(annotation.text);}},onHighlightAdd:highlight=>{setHighlights([...highlights,highlight]);const note=prompt('Add a note to this highlight:');if(note){setAnnotations([...annotations,{highlightId:highlight.id,text:note,timestamp:new Date()}]);}}});const handleFileChange=e=>{const file=e.target.files[0];if(file){setLoading(true);const reader=new FileReader();reader.onload=e=>{setPdfFile(e.target.result);setLoading(false);};reader.onerror=()=>{setLoading(false);alert('Error reading file');};reader.readAsDataURL(file);}};const handleTextSelection=e=>{setSelectedText(e.selectedText);};// Update any code that was using setAnnotations prop to use onAnnotationUpdate instead\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"document-viewer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-input-wrapper\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"file-input-button\",children:[/*#__PURE__*/_jsx(PictureAsPdfIcon,{}),\" Open PDF\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf\",onChange:handleFileChange})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"toolbar-button\",children:[/*#__PURE__*/_jsx(BookmarkIcon,{}),\" Bookmarks\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"toolbar-button\",children:[/*#__PURE__*/_jsx(HighlightIcon,{}),\" Highlight\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"toolbar-button\",children:[/*#__PURE__*/_jsx(NoteAddIcon,{}),\" Add Note\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-container\",style:{display:'flex',height:'750px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"bookmarks\",style:{width:'200px',borderRight:'1px solid #ccc',padding:'10px'},children:bookmarkPluginInstance.renderBookmarks()}),/*#__PURE__*/_jsx(\"div\",{className:\"pdf-viewer\",style:{flex:1},children:pdfFile&&/*#__PURE__*/_jsx(Worker,{workerUrl:\"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js\",children:/*#__PURE__*/_jsx(Viewer,{fileUrl:pdfFile,plugins:[defaultLayoutPluginInstance,highlightPluginInstance,toolbarPluginInstance,bookmarkPluginInstance],defaultScale:1,selectionMode:SelectionMode.Text,onTextSelection:handleTextSelection})})})]})]});};export default DocumentViewer;","map":{"version":3,"names":["React","useState","Viewer","defaultLayoutPlugin","Worker","highlightPlugin","SelectionMode","toolbarPlugin","bookmarkPlugin","PictureAsPdfIcon","BookmarkIcon","HighlightIcon","NoteAddIcon","jsx","_jsx","jsxs","_jsxs","DocumentViewer","_ref","setLoading","onAnnotationUpdate","pdfFile","setPdfFile","highlights","setHighlights","annotations","setAnnotations","selectedText","setSelectedText","defaultLayoutPluginInstance","toolbarPluginInstance","bookmarkPluginInstance","highlightPluginInstance","onHighlightClick","highlight","annotation","find","a","highlightId","id","alert","text","onHighlightAdd","note","prompt","timestamp","Date","handleFileChange","e","file","target","files","reader","FileReader","onload","result","onerror","readAsDataURL","handleTextSelection","className","children","type","accept","onChange","style","display","height","width","borderRight","padding","renderBookmarks","flex","workerUrl","fileUrl","plugins","defaultScale","selectionMode","Text","onTextSelection"],"sources":["C:/Users/JS/testinge/src/components/DocumentViewer.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Viewer } from '@react-pdf-viewer/core';\r\nimport { defaultLayoutPlugin } from '@react-pdf-viewer/default-layout';\r\nimport { Worker } from '@react-pdf-viewer/core';\r\nimport { highlightPlugin } from '@react-pdf-viewer/highlight';\r\nimport { SelectionMode } from '@react-pdf-viewer/selection-mode';\r\nimport { toolbarPlugin } from '@react-pdf-viewer/toolbar';\r\nimport { bookmarkPlugin } from '@react-pdf-viewer/bookmark';\r\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\r\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\r\nimport HighlightIcon from '@mui/icons-material/Highlight';\r\nimport NoteAddIcon from '@mui/icons-material/NoteAdd';\r\n\r\nconst DocumentViewer = ({ setLoading, onAnnotationUpdate }) => {\r\n  const [pdfFile, setPdfFile] = useState(null);\r\n  const [highlights, setHighlights] = useState([]);\r\n  const [annotations, setAnnotations] = useState([]);\r\n  const [selectedText, setSelectedText] = useState('');\r\n  \r\n  const defaultLayoutPluginInstance = defaultLayoutPlugin();\r\n  const toolbarPluginInstance = toolbarPlugin();\r\n  const bookmarkPluginInstance = bookmarkPlugin();\r\n  \r\n  const highlightPluginInstance = highlightPlugin({\r\n    onHighlightClick: (highlight) => {\r\n      const annotation = annotations.find(a => a.highlightId === highlight.id);\r\n      if (annotation) {\r\n        // Show annotation in a popup\r\n        alert(annotation.text);\r\n      }\r\n    },\r\n    onHighlightAdd: (highlight) => {\r\n      setHighlights([...highlights, highlight]);\r\n      const note = prompt('Add a note to this highlight:');\r\n      if (note) {\r\n        setAnnotations([...annotations, {\r\n          highlightId: highlight.id,\r\n          text: note,\r\n          timestamp: new Date()\r\n        }]);\r\n      }\r\n    }\r\n  });\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setLoading(true);\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setPdfFile(e.target.result);\r\n        setLoading(false);\r\n      };\r\n      reader.onerror = () => {\r\n        setLoading(false);\r\n        alert('Error reading file');\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleTextSelection = (e) => {\r\n    setSelectedText(e.selectedText);\r\n  };\r\n  \r\n  // Update any code that was using setAnnotations prop to use onAnnotationUpdate instead\r\n  \r\n  return (\r\n    <div className=\"document-viewer\">\r\n      <div className=\"toolbar\">\r\n        <div className=\"file-input-wrapper\">\r\n          <button className=\"file-input-button\">\r\n            <PictureAsPdfIcon /> Open PDF\r\n          </button>\r\n          <input type=\"file\" accept=\".pdf\" onChange={handleFileChange} />\r\n        </div>\r\n        <button className=\"toolbar-button\">\r\n          <BookmarkIcon /> Bookmarks\r\n        </button>\r\n        <button className=\"toolbar-button\">\r\n          <HighlightIcon /> Highlight\r\n        </button>\r\n        <button className=\"toolbar-button\">\r\n          <NoteAddIcon /> Add Note\r\n        </button>\r\n      </div>\r\n      <div className=\"viewer-container\" style={{ display: 'flex', height: '750px' }}>\r\n        <div className=\"bookmarks\" style={{ width: '200px', borderRight: '1px solid #ccc', padding: '10px' }}>\r\n          {bookmarkPluginInstance.renderBookmarks()}\r\n        </div>\r\n        <div className=\"pdf-viewer\" style={{ flex: 1 }}>\r\n          {pdfFile && (\r\n            <Worker workerUrl=\"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js\">\r\n              <Viewer\r\n                fileUrl={pdfFile}\r\n                plugins={[\r\n                  defaultLayoutPluginInstance,\r\n                  highlightPluginInstance,\r\n                  toolbarPluginInstance,\r\n                  bookmarkPluginInstance\r\n                ]}\r\n                defaultScale={1}\r\n                selectionMode={SelectionMode.Text}\r\n                onTextSelection={handleTextSelection}\r\n              />\r\n            </Worker>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}