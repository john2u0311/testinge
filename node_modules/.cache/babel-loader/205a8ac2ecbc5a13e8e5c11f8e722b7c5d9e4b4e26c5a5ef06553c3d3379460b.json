{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{fabric}from'fabric';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Workspace=()=>{const canvasRef=useRef(null);const fabricCanvasRef=useRef(null);const[isCanvasReady,setIsCanvasReady]=useState(false);useEffect(()=>{if(!canvasRef.current)return;try{requestAnimationFrame(()=>{fabricCanvasRef.current=new fabric.Canvas(canvasRef.current,{width:window.innerWidth/2,height:window.innerHeight,backgroundColor:'#f0f0f0',preserveObjectStacking:true,enableRetinaScaling:true,renderOnAddRemove:true,selection:true,interactive:true});setIsCanvasReady(true);});let resizeTimeout;const handleResize=()=>{if(!fabricCanvasRef.current)return;clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{const width=window.innerWidth/2;const height=window.innerHeight;fabricCanvasRef.current.setDimensions({width,height});fabricCanvasRef.current.setZoom(fabricCanvasRef.current.getZoom());fabricCanvasRef.current.renderAll();},250);};window.addEventListener('resize',handleResize);return()=>{window.removeEventListener('resize',handleResize);clearTimeout(resizeTimeout);if(fabricCanvasRef.current){fabricCanvasRef.current.dispose();fabricCanvasRef.current=null;}setIsCanvasReady(false);};}catch(error){console.error('Error initializing canvas:',error);setIsCanvasReady(false);}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"workspace\",style:{width:'50%',height:'100%'},children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef}),!isCanvasReady&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)'},children:\"Loading workspace...\"})]});};export default Workspace;","map":{"version":3,"names":["React","useEffect","useRef","useState","fabric","jsx","_jsx","jsxs","_jsxs","Workspace","canvasRef","fabricCanvasRef","isCanvasReady","setIsCanvasReady","current","requestAnimationFrame","Canvas","width","window","innerWidth","height","innerHeight","backgroundColor","preserveObjectStacking","enableRetinaScaling","renderOnAddRemove","selection","interactive","resizeTimeout","handleResize","clearTimeout","setTimeout","setDimensions","setZoom","getZoom","renderAll","addEventListener","removeEventListener","dispose","error","console","className","style","children","ref","position","top","left","transform"],"sources":["C:/Users/JS/testinge/src/components/Workspace.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst Workspace = () => {\r\n  const canvasRef = useRef(null);\r\n  const fabricCanvasRef = useRef(null);\r\n  const [isCanvasReady, setIsCanvasReady] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!canvasRef.current) return;\r\n\r\n    try {\r\n      requestAnimationFrame(() => {\r\n        fabricCanvasRef.current = new fabric.Canvas(canvasRef.current, {\r\n          width: window.innerWidth / 2,\r\n          height: window.innerHeight,\r\n          backgroundColor: '#f0f0f0',\r\n          preserveObjectStacking: true,\r\n          enableRetinaScaling: true,\r\n          renderOnAddRemove: true,\r\n          selection: true,\r\n          interactive: true\r\n        });\r\n        setIsCanvasReady(true);\r\n      });\r\n\r\n      let resizeTimeout;\r\n      const handleResize = () => {\r\n        if (!fabricCanvasRef.current) return;\r\n        \r\n        clearTimeout(resizeTimeout);\r\n        resizeTimeout = setTimeout(() => {\r\n          const width = window.innerWidth / 2;\r\n          const height = window.innerHeight;\r\n          \r\n          fabricCanvasRef.current.setDimensions({ width, height });\r\n          fabricCanvasRef.current.setZoom(fabricCanvasRef.current.getZoom());\r\n          fabricCanvasRef.current.renderAll();\r\n        }, 250);\r\n      };\r\n\r\n      window.addEventListener('resize', handleResize);\r\n\r\n      return () => {\r\n        window.removeEventListener('resize', handleResize);\r\n        clearTimeout(resizeTimeout);\r\n        if (fabricCanvasRef.current) {\r\n          fabricCanvasRef.current.dispose();\r\n          fabricCanvasRef.current = null;\r\n        }\r\n        setIsCanvasReady(false);\r\n      };\r\n    } catch (error) {\r\n      console.error('Error initializing canvas:', error);\r\n      setIsCanvasReady(false);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"workspace\" style={{ width: '50%', height: '100%' }}>\r\n      <canvas ref={canvasRef} />\r\n      {!isCanvasReady && (\r\n        <div style={{ \r\n          position: 'absolute', \r\n          top: '50%', \r\n          left: '50%', \r\n          transform: 'translate(-50%, -50%)'\r\n        }}>\r\n          Loading workspace...\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Workspace;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}